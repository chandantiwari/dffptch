define(function(){var r=Object,e=r.keys,t={diff:function f(t,n){for(var o=e(t).sort(),a=e(n).sort(),i={},d={},s={},c=[],u={},v=0,h=0;o[v]||a[h];){var l=o[v],m=String.fromCharCode(v+48),C=a[h],p=t[l],b=n[C];if(l==C){if(r(p)===p&&r(b)===b){var g=f(p,b);e(g)[0]&&(u[m]=g)}else p!==b&&(s[m]=b);v++,h++}else l>C||!l?(d[C]=b,h++):(c.push(m),v++)}return c[0]&&(i.d=c),e(d)[0]&&(i.a=d),e(s)[0]&&(i.m=s),e(u)[0]&&(i.r=u),i},patch:function n(r,t){var f,o,a,i,d=e(r).sort();for(f in t)for(o in t[f])a=t[f][o],i=d[("d"!=f?o:a).charCodeAt()-48],"a"==f?r[o]=a:"m"==f?r[i]=a:"d"==f?delete r[i]:n(r[i],a)}};return t});