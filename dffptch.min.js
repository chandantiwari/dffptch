!function(n){function t(n,t,f,r,a){return f={},n.map(function(n){for(a=1;(r=n.slice(0,a++))<=t;);f[t=r]=n}),f}var f=Object,r=f.keys;n.diff=function a(n,i){for(var o=r(n).sort(),c=r(i).sort(),e=r(t(o)),u={},s={},m={},p=[],d={},v=0,h=0;o[v]||c[h];){var l=o[v],b=e[v],j=c[h],k=n[l],y=i[j];if(l==j){if(f(k)===k&&f(y)===y){var O=a(k,y);r(O)&&(d[b]=O)}else k!==y&&(m[b]=y);v++,h++}else l>j||!l?(s[j]=y,h++):(p.push(b),v++)}return p[0]&&(u.d=p),r(s)[0]&&(u.a=s),r(m)[0]&&(u.m=m),r(d)[0]&&(u.r=d),u},n.patch=function i(n,f){var a=t(r(n).sort());r(f.a||{}).map(function(t){n[t]=f.a[t]}),r(f.m||{}).map(function(t){n[a[t]]=f.m[t]}),(f.d||[]).map(function(t){delete n[a[t]]}),r(f.r||{}).map(function(t){i(n[a[t]],f.r[t])})}}(this.dffptch={});